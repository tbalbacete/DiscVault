# DiscVault Frontend

This is a UI for the DiscVault project built using updated tools and frameworks.

## What's inside?

`GivingTreeFrontend` is a [Vite](https://vitejs.dev/) single page web app that contains the following:

### Key Directories

- `api`: generated apis and models based on schema from `openapi.json`
- `data`: hooks/context to access api using `react-query`
- `packages/components`: reusable components, including storybook stories and tests
- `styles`: setup for MUI theme, including colors, typography, and default component overrides
- `tsconfig`: tsconfig.jsons used throughout the repo

### Utilities

- [React](https://react.dev/) and [Vite](https://vitejs.dev/)
- [Yarn](https://yarnpkg.com/) for package management
- [TypeScript](https://www.typescriptlang.org/) for static type checking
- [ESLint](https://eslint.org/) for code linting
- [Prettier](https://prettier.io) for code formatting
- [Storybook](https://storybook.js.org/) for component documentation
- [Plop](https://plopjs.com/) for quickly generating new components
- [Material UI](https://mui.com) as a component library
- [Husky](https://typicode.github.io/husky/) for pre-push checking

## Adding a new component

To add a new component, simply run `yarn plop` from GivingTreeFrontend and follow the prompts. This will automatically generate the `component`, `story`, `tests`, `styles`, and update the components `index` to export the new component.

## Material UI

Material UI is our Component Library which controls both our UI components and themes. Documentation can be found here: [https://mui.com/material-ui/getting-started/overview/](https://mui.com/material-ui/getting-started/overview/)

Notes:

- There are many commonly used components from MUI that you will see throughout the app. Common components:
  - Box – Effectively a div, used as a container for content
  - Typography – our text component, uses our theme with multiple variants to keep our typography consistent. You can see the typography theme at packages\styles\src\theme\typography.ts
  - Button (see theme) – Similar to Typography, reusable MUI component with custom styles to be reusable throughout the ap e.g., "primary", "secondary", "warning", etc.
- **Please be aware that changing any of the prebuilt MUI component themes will affect numerous pages throughout the app** , and thus should be discouraged unless necessary.

## Theme

Our colors and typography are sourced from Republic's brand standards. Other presets (which can be found in `styles`) are sourced from CrewPay. This helps build consistency across Republic applications.

## Storybook

Storybook is a package we use to allow you to preview and develop reusable components. Run it using `yarn storybook` from `GivingTreeFrontend`. Use Storybook to see which reusable components may suit the need of the feature you are developing.

Reusable components will have a .story.tsx file in their directory which is used to populate the storybook entry for that component.

Notes:

- Storybook can take a long time to load. Waiting a few seconds and refreshing can speed up the loading process
- Reusable components must have a fleshed-out story before they are approved and merged
  - One exception to this is wrapped components in the `Formik` folder. Reference their unwrapped counterparts instead.
- Translations referenced in the component will display as string literals in the story, so double check all translations.

## API

All API endpoints are in `/api`. We use the openapi-generator package to build our API code and get the latest changes in the API. **Under no circumstances are any autogenerated files to be changed manually be a developer**. There are two main directories in `/api`: apis and models

- Apis: where the endpoints are, categorized as Admin or Default. This is where you would go to check and endpoint for its return type, or any information you need to build a new data hook (see Data Hooks)
- Models: the models utilized by the API. These need to be referenced for knowing what objects returned by the API are shaped like and how they will be used in the UI

## Getting API Changes

To update/get the latest API changes, follow the following workflow:

1. Make necessary changes in `openapi.json`
1. `cd` to `GivingTreeFrontend`
1. Run the command `yarn generate` to generate the api changes
1. View the changes in source control to verify they are correct, update any hooks if needed
1. Run `yarn build`

## Creating/Editing Data Hooks

To use the API endpoints, we create hooks in `/data`. Hooks are organized by the entities they deal with. When modifying a hook, please beware that hooks can be used in multiple pages of the app. To create a hook, follow the following workflow:

1. Go to `data/hooks`
2. Find the appropriate _useXXXData.ts_ hook file if you are editing a hook or create a new one using the same naming format, ensuring that you add the new file to index.ts for export
3. Develop/modify the hook as needed, ensuring that anywhere the hook is called in the app is still functioning properly

## Common Standards

- The preset theme types are to be used for any newly developed UI features where applicable
- If working in a directory with multiple potential exports, add an index.ts and export from there
- When adding any readable text to the application, use the useTranslation hook and add the text to translations.json
- If a value or a function is expected to be reused or repeatedly referenced, it should be moved to a const or utils folder
- Use MUI components and Phosphor Icons wherever possible, if needed, to maintain the consistent theme

## Subject Matter Experts

The primary SME's who have worked entirely or in large part on this project are:

- Tony Albacete
- Emily Lewis
